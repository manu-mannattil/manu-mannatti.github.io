<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="keywords" content="ssh" />
  <title>Notes on SSH</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Notes on SSH</h1>
</header>
<h1 id="prevent-bash-ssh-completion-from-using-hosts-entries">Prevent
Bash SSH completion from using hosts entries</h1>
<p>By default, the <a
href="https://github.com/scop/bash-completion/blob/master/completions/ssh">completion
helper</a> for SSH from the <a
href="https://github.com/scop/bash-completion/">Bash completion
project</a> populates the hostname suggestions with entries from the
hosts file located at <code>/etc/hosts</code>. This may not be very
convenient if you use the hosts file to block ads. In such a case there
would be a very large number of entries in <code>/etc/hosts</code>, none
of which would be a host you would want to SSH into.</p>
<p>The completion helper for SSH gets the host names from the <a
href="https://github.com/scop/bash-completion/blob/36ceb272ddf7ef70b7fa79c5c3686080b1510054/bash_completion#L1920-L1934"><code>_known_hosts_real</code>
utility function</a>. To prevent this function from using
<code>/etc/hosts</code> entries, set the environment variable
<code>BASH_COMPLETION_KNOWN_HOSTS_WITH_HOSTFILE</code> to an empty
value. However, note that older versions of
<code>_known_hosts_real</code> used the environment variable
<code>COMP_KNOWN_HOSTS_WITH_HOSTFILE</code> for the same purpose.</p>
<pre><code>export COMP_KNOWN_HOSTS_WITH_HOSTFILE=
export BASH_COMPLETION_KNOWN_HOSTS_WITH_HOSTFILE=</code></pre>
<p id="date">Last updated: 2022-08-03 12:00 IST</p>
</body>
</html>
